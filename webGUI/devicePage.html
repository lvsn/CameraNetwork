<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />

    <script type="text/javascript" src="http://cdn.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
    <script type="text/javascript" src="http://cdn.robotwebtools.org/roslibjs/current/roslib.min.js"></script>
    <script type="text/javascript" src="http://cdn.robotwebtools.org/mjpegcanvasjs/current/mjpegcanvas.min.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="./js/jquery.timepicker.min.js"></script>
    <script type="text/javascript" src="./js/jquery.blockUI.js"></script>
    <script type="text/javascript" src="rosclient.js"></script>
    <script type="text/javascript" src="dynamicPage.js"></script>

    <link rel="stylesheet" href="style.css" type="text/css" media="screen, projection" />

    <title>Camera Network</title>
</head>

<body>
    <nav>
        <span id="device_list">Loading device list...</span>
        <a href="./networkPage.html">Network</a>
        <a href="./devicePage.html">Device</a>
    </nav>

    <div id="main-content">
    <div id="sub-content">
    <!-- Device interface -->
        <div class="mainStyle">
        <div class="parameterStyle right">
            <span id="param_status"></span>
            <form name="timelapse" action="javascript:void(0)" method="get">
                <label>ISO
                    <select id="device_parameter_iso" value='' name="device_parameter_iso" >
                    </select>
                </label>
                <label>Aperture :
                    <select id="device_parameter_aperture" value='' name="device_parameter_aperture" >
                    </select>
                </label>
                <label>Shutter Speed :
                    <select id="device_parameter_shutterspeed" value='' name="device_parameter_shutterspeed" >
                    </select>
                </label>
                <label>Format :
                    <select id="device_parameter_imageformat" value='' name="device_parameter_imageformat" >
                    </select>
                </label>
                <labe>Quantity of picture before download :
                    <input id="device_dowload_qty" type="number" value="1" name="device_dowload_qty" >
                </labe>
                <input type="submit" class="styleButton" onclick="setParametersEvent(this.form)" value="Set">
            </form>
            <button type="button" class="styleButton" onclick="calibratePictureEvent(this.form)">Auto</button>
        </div>

        <div style="float:left;">
            <select class="styleSelect" onchange="selectEvent(this);" id="deviceList" disabled="disabled">
                    <option value="index0">Loading Devices...</option>
            </select> 
            <dl>
                <dt>Device:</dt>
                <dd id="device_name"></dd>
                                    <dt>IP:</dt>
                <dd id="device_ip"></dd>
                                    <dt>Type:</dt>
                <dd id="device_camera"></dd>
            </dl> 
            <dl>
                                <dt>ISO:</dt>
            <dd id="device_iso"></dd>
                                <dt>Aperture:</dt>
            <dd id="device_aperture"></dd>
                                <dt>Shutter:</dt>
            <dd id="device_shutterspeed"></dd><dd>sec<sup>-1</sup></dd>
                                <dt>Format :</dt>
            <dd id ="device_imageformat"></dd>
                                <dt>Total space :</dt>
            <dd id ="device_totalspace"></dd>
                                <dt>Free space :</dt>
            <dd id ="device_freespace"></dd>
                                <dt>Free images :</dt>
            <dd id ="device_freeimages"></dd>
            </dl>
        </div>
        </div>

        <!-- Parameter interface -->
        <div class="mainStyle" id="capture_mode">
            <div style="float:left;">
                <p>Capture Parameters:</p>
                <p id="device_parameters"></p>
            </div>
            <div class="parameterStyle right">
                <form  name="timelapse" action="javascript:void(0)" method="get">
                    <label>Aperture :
                        <select id="device_sequence_aperture" value='' name="device_sequence_aperture" >
                        </select>
                    </label>
                    <label>Shutter Speed :
                        <select id="device_sequence_shutterspeed" value='' name="device_sequence_shutterspeed" >
                        </select>
                    </label>
                    <input type="submit" class="styleButton" onclick="addSequenceEvent(this.form)" value="Add">
                </form>
                <button type="button" class="styleButton" onclick = "saveSequenceEvent()">Save</button>
                <button type="button" class="styleButton" onclick = "removeSequenceEvent(this.form)">Reset</button>
            </div>
        </div>


<!-- Timelaps interface -->
        <div class="mainStyle">
            <form name="timelapse" action="javascript:void(0)" method="get">
                <label>
                    <span>Frequency :</span>
                    <input id="device_timelapse_frequency" type="number" value="0" name="device_timelapse_frequency" >
                    <span>seconds</span>
                </label>
                <label>
                    <span>Quantity :</span>
                    <input id="device_timelapse_qty" type="number" value="1" name="device_timelapse_qty" >
                    <span>(&lt;0 = infinite)</span>
                </label>
                <input type="checkbox" id="device_hdr" value="HDR">HDR<br>
                <dl>
                    <dt>Status:</dt>
                        <dd id="device_timelapse_status"></dd>
                    <dt>Feedback:</dt>
                        <dd id="device_timelapse_feedback"></dd>
                    <dt>Termination:</dt>
                        <dd id="device_timelapse_result"></dd>
                </dl>
                <div style="clear: both;"></div>
                <div class="floatleft">
                    <input type="submit" class="styleButton" onclick="deviceTimelapsEvent(this.form, true)" value="Launch acquisition">
                </div>
                <div class="floatright">
                    <input type="submit" class="styleButton" onclick="deviceTimelapsEvent(this.form, false)" value="Stop">
                </div>
            </form>

        </div> 
        <!-- preview interface -->
        <div class="mainStyle">
                <form class="parameterStyle right" name="stream" action="javascript:void(0)" method="get">
              Frames:<input id="device_stream_frames" type="number" value="10" name="device_stream_frames" >
                        <button type="button" class="styleButton" onclick = "streamVideoEvent()">(beta)Stream</button>
                </form>
                <img id="preview_image" alt="some_text">
        <br>
                <button type="button" class="floatleft" onclick = "drawPreviewEvent()">Preview</button>
        </div>

        <div class="mainStyle">
                <button type="button" class="floatleft" onclick = "shutdownDeviceEvent()">Shutdown Device</button>
                <button type="button" class="floatright" onclick = "rebootDeviceEvent()">Reboot Device</button>
        </div>


    </div>
    </div>

</body>
</html>
